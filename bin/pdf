#!/usr/bin/env zsh

. ~/.config/zsh/alias.zsh

paths="/mnt/c/notes/books
/mnt/c/notes/Raw
/mnt/c/notes/Markdown/Raw"

s="/mnt/c/$(echo $paths | xargs fd -e pdf . | sed 's|/mnt/c/||' | dmenu)"

wpath=`wslpath -w "$s"`

pdfviewers="firefox
wsl-open
okular
pdfgear
speedread"

opener=$(echo $pdfviewers | dmenu)
if [ "$opener" = "firefox" ]; then
  firefox "$wpath"
elif [ "$opener" = "okular" ]; then
  "/mnt/c/Program Files/Okular/bin/okular.exe" "$wpath"
elif [ "$opener" = "pdfgear" ]; then
   /mnt/c/Program\ Files/PDFgear/PDFLauncher.exe  "$wpath"
elif [ "$opener" = "speedread" ]; then
  p=$(echo "page number to start from" | dmenu)
  pdftotext "$s" -f $p -layout - | speedread -w 350
else
  wsl-open "$wpath"
fi
